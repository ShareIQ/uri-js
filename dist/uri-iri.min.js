/*
 URI.js v2.0.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js
*/
var B,URI=function(){function g(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(1<a.length){a[0]=a[0].slice(0,-1);for(var b=a.length-1,h=1;h<b;++h)a[h]=a[h].slice(1,-1);a[b]=a[b].slice(1);return a.join("")}return a[0]}function k(a){var b=g("[0-9]","[A-Fa-f]"),h=g("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",a?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");return{v:!1,m:new RegExp(g("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),o:new RegExp(g("[^\\%\\:]",
h,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),h:new RegExp(g("[^\\%\\[\\]:]",h,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),i:new RegExp(g("[^\\%\\/\\:\\@]",h,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),j:new RegExp(g("[^\\%\\/\\@]",h,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),l:new RegExp(g("[^\\%]",h,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]",a?"[\\uE000-\\uF8FF]":"[]"),"g"),g:new RegExp(g("[^\\%]",h,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]"),"g"),c:new RegExp(g("[^]",h,
"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),s:new RegExp(h,"g"),u:new RegExp(g("[^\\%]",h,g("[\\:\\/\\?\\#\\[\\]\\@]","[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]")),"g"),a:new RegExp("(?:"+("(?:"+("%[EFef]"+b+"%"+b+b+"%"+b+b)+")|"+("(?:"+("%[89A-Fa-f]"+b+"%"+b+b)+")")+"|"+("(?:"+("%"+b+b)+")"))+")","g")}}function n(a){a=a.charCodeAt(0);return 16>a?"%0"+a.toString(16).toUpperCase():128>a?"%"+a.toString(16).toUpperCase():2048>a?"%"+(a>>6|192).toString(16).toUpperCase()+"%"+(a&63|128).toString(16).toUpperCase():
"%"+(a>>12|224).toString(16).toUpperCase()+"%"+(a>>6&63|128).toString(16).toUpperCase()+"%"+(a&63|128).toString(16).toUpperCase()}function x(a){for(var b="",h=0,c=a.length,d,e,m;h<c;)d=parseInt(a.substr(h+1,2),16),128>d?(b+=String.fromCharCode(d),h+=3):194<=d&&224>d?(6<=c-h?(e=parseInt(a.substr(h+4,2),16),b+=String.fromCharCode((d&31)<<6|e&63)):b+=a.substr(h,6),h+=6):224<=d?(9<=c-h?(e=parseInt(a.substr(h+4,2),16),m=parseInt(a.substr(h+7,2),16),b+=String.fromCharCode((d&15)<<12|(e&63)<<6|m&63)):b+=
a.substr(h,9),h+=9):(b+=a.substr(h,3),h+=3);return b}function C(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()}function y(a){return a.toUpperCase()}function f(a,b){function h(a){var d=x(a);return d.match(b.s)?d:a}a.scheme&&(a.scheme=String(a.scheme).replace(b.a,h).toLowerCase().replace(b.m,""));void 0!==a.userinfo&&(a.userinfo=String(a.userinfo).replace(b.a,h).replace(b.o,n).replace(b.a,y));void 0!==a.host&&(a.host=
String(a.host).replace(b.a,h).toLowerCase().replace(b.h,n).replace(b.a,y));void 0!==a.path&&(a.path=String(a.path).replace(b.a,h).replace(a.scheme?b.i:b.j,n).replace(b.a,y));void 0!==a.query&&(a.query=String(a.query).replace(b.a,h).replace(b.l,n).replace(b.a,y));void 0!==a.fragment&&(a.fragment=String(a.fragment).replace(b.a,h).replace(b.g,n).replace(b.a,y))}function l(a,b){void 0===b&&(b={});var h=!1!==b.iri?A:u,c,d={};"suffix"===b.reference&&(a=(b.scheme?b.scheme+":":"")+"//"+a);if(c=a.match(e)){m?
(d.scheme=c[1],d.userinfo=c[3],d.host=c[4],d.port=parseInt(c[5],10),d.path=c[6]||"",d.query=c[7],d.fragment=c[8],isNaN(d.port)&&(d.port=c[5])):(d.scheme=c[1]||void 0,d.userinfo=-1!==a.indexOf("@")?c[3]:void 0,d.host=-1!==a.indexOf("//")?c[4]:void 0,d.port=parseInt(c[5],10),d.path=c[6]||"",d.query=-1!==a.indexOf("?")?c[7]:void 0,d.fragment=-1!==a.indexOf("#")?c[8]:void 0,isNaN(d.port)&&(d.port=a.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?c[4]:void 0));d.reference=void 0!==d.scheme||void 0!==d.userinfo||
void 0!==d.host||void 0!==d.port||d.path||void 0!==d.query?void 0===d.scheme?"relative":void 0===d.fragment?"absolute":"uri":"same-document";b.reference&&"suffix"!==b.reference&&b.reference!==d.reference&&(d.error=d.error||"URI is not a "+b.reference+" reference.");c=t[(b.scheme||d.scheme||"").toLowerCase()];if("undefined"===typeof B||b.unicodeSupport||c&&c.unicodeSupport)f(d,h);else{if(d.host&&(b.domainHost||c&&c.domainHost))try{d.host=B.b(d.host.replace(h.a,x).toLowerCase())}catch(F){d.error=d.error||
"Host's domain name can not be converted to ASCII via punycode: "+F}f(d,u)}c&&c.parse&&c.parse(d,b)}else d.error=d.error||"URI can not be parsed.";return d}function D(a){var b=[];void 0!==a.userinfo&&(b.push(a.userinfo),b.push("@"));void 0!==a.host&&b.push(a.host);"number"===typeof a.port&&(b.push(":"),b.push(a.port.toString(10)));return b.length?b.join(""):void 0}function q(a){for(var b=[],h;a.length;)a.match(w)?a=a.replace(w,""):a.match(E)?a=a.replace(E,"/"):a.match(c)?(a=a.replace(c,"/"),b.pop()):
"."===a||".."===a?a="":(h=a.match(r)[0],a=a.slice(h.length),b.push(h));return b.join("")}function v(a,b){void 0===b&&(b={});var c=b.iri?A:u,e=[],d,m;(d=t[(b.scheme||a.scheme||"").toLowerCase()])&&d.serialize&&d.serialize(a,b);if("undefined"!==typeof B&&a.host&&(b.domainHost||d&&d.domainHost))try{a.host=b.iri?B.f(a.host):B.b(a.host.replace(c.a,x).toLowerCase())}catch(G){a.error=a.error||"Host's domain name can not be converted to "+(b.iri?"Unicode":"ASCII")+" via punycode: "+G}f(a,c);"suffix"!==b.reference&&
a.scheme&&(e.push(a.scheme),e.push(":"));c=D(a);void 0!==c&&("suffix"!==b.reference&&e.push("//"),e.push(c),a.path&&"/"!==a.path.charAt(0)&&e.push("/"));void 0!==a.path&&(m=a.path,b.absolutePath||d&&d.absolutePath||(m=q(m)),void 0===c&&(m=m.replace(/^\/\//,"/%2F")),e.push(m));void 0!==a.query&&(e.push("?"),e.push(a.query));void 0!==a.fragment&&(e.push("#"),e.push(a.fragment));return e.join("")}function z(a,b,c,e){void 0===c&&(c={});var d={};e||(a=l(v(a,c),c),b=l(v(b,c),c));c=c||{};!c.tolerant&&b.scheme?
(d.scheme=b.scheme,d.userinfo=b.userinfo,d.host=b.host,d.port=b.port,d.path=q(b.path),d.query=b.query):(void 0!==b.userinfo||void 0!==b.host||void 0!==b.port?(d.userinfo=b.userinfo,d.host=b.host,d.port=b.port,d.path=q(b.path),d.query=b.query):(b.path?("/"===b.path.charAt(0)?d.path=q(b.path):(d.path=void 0===a.userinfo&&void 0===a.host&&void 0===a.port||a.path?a.path?a.path.slice(0,a.path.lastIndexOf("/")+1)+b.path:b.path:"/"+b.path,d.path=q(d.path)),d.query=b.query):(d.path=a.path,d.query=void 0!==
b.query?b.query:a.query),d.userinfo=a.userinfo,d.host=a.host,d.port=a.port),d.scheme=a.scheme);d.fragment=b.fragment;return d}var u=k(!1),A=k(!0),e=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?((?:\[[0-9a-fA-F:]+\]|[^\/?#:]*))(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i,w=/^\.\.?\//,E=/^\/\.(\/|$)/,c=/^\/\.\.(\/|$)/,r=/^\/?(?:.|\n)*?(?=\/|$)/,m=void 0==="".match(/(){0}/)[1],t={};return{IRI_SUPPORT:!0,VALIDATE_SUPPORT:!1,pctEncChar:n,pctDecChars:x,SCHEMES:t,parse:l,_recomposeAuthority:D,
removeDotSegments:q,serialize:v,resolveComponents:z,resolve:function(a,b,c){return v(z(l(a,c),l(b,c),c,!0),c)},normalize:function(a,b){"string"===typeof a?a=v(l(a,b),b):"object"===C(a)&&(a=l(v(a,b),b));return a},equal:function(a,b,c){"string"===typeof a?a=v(l(a,c),c):"object"===C(a)&&(a=v(a,c));"string"===typeof b?b=v(l(b,c),c):"object"===C(b)&&(b=v(b,c));return a===b},escapeComponent:function(a,b){return a&&a.toString().replace(b&&b.iri?A.c:u.c,n)},unescapeComponent:function(a,b){return a&&a.toString().replace(b&&
b.iri?A.a:u.a,x)}}}();B=function(){function g(e){throw new RangeError(z[e]);}function k(e,w){for(var f=e.length,c=[];f--;)c[f]=w(e[f]);return c}function n(e,f){var w=e.split("@"),c="";1<w.length&&(c=w[0]+"@",e=w[1]);e=e.replace(v,".");w=k(e.split("."),f).join(".");return c+w}function x(e){for(var w=[],f=0,c=e.length,r,m;f<c;)r=e.charCodeAt(f++),55296<=r&&56319>=r&&f<c?(m=e.charCodeAt(f++),56320==(m&64512)?w.push(((r&1023)<<10)+(m&1023)+65536):(w.push(r),f--)):w.push(r);return w}function C(e){return k(e,function(e){var f=
"";65535<e&&(e-=65536,f+=A(e>>>10&1023|55296),e=56320|e&1023);return f+=A(e)}).join("")}function y(e,f,g){var c=0;e=g?u(e/700):e>>1;for(e+=u(e/f);455<e;c+=36)e=u(e/35);return u(c+36*e/(e+38))}function f(e){var f=[],k=e.length,c,r=0,m=128,t=72,a,b,h,p,d;a=e.lastIndexOf("-");0>a&&(a=0);for(b=0;b<a;++b)128<=e.charCodeAt(b)&&g("not-basic"),f.push(e.charCodeAt(b));for(a=0<a?a+1:0;a<k;){b=r;c=1;for(h=36;;h+=36){a>=k&&g("invalid-input");p=e.charCodeAt(a++);p=10>p-48?p-22:26>p-65?p-65:26>p-97?p-97:36;(36<=
p||p>u((2147483647-r)/c))&&g("overflow");r+=p*c;d=h<=t?1:h>=t+26?26:h-t;if(p<d)break;p=36-d;c>u(2147483647/p)&&g("overflow");c*=p}c=f.length+1;t=y(r-b,c,0==b);u(r/c)>2147483647-m&&g("overflow");m+=u(r/c);r%=c;f.splice(r++,0,m)}return C(f)}function l(e){var f,k,c,r,m,t,a,b,h,p=[],d,l,q;e=x(e);d=e.length;f=128;k=0;m=72;for(t=0;t<d;++t)h=e[t],128>h&&p.push(A(h));for((c=r=p.length)&&p.push("-");c<d;){a=2147483647;for(t=0;t<d;++t)h=e[t],h>=f&&h<a&&(a=h);l=c+1;a-f>u((2147483647-k)/l)&&g("overflow");k+=
(a-f)*l;f=a;for(t=0;t<d;++t)if(h=e[t],h<f&&2147483647<++k&&g("overflow"),h==f){b=k;for(a=36;;a+=36){h=a<=m?1:a>=m+26?26:a-m;if(b<h)break;q=b-h;b=36-h;h+=q%b;p.push(A(h+22+75*(26>h)-0));b=u(q/b)}p.push(A(b+22+75*(26>b)-0));m=y(k,l,c==r);k=0;++c}++k;++f}return p.join("")}var D=/^xn--/,q=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=Math.floor,A=
String.fromCharCode;return{version:"1.3.2",w:{decode:x,encode:C},decode:f,encode:l,b:function(e){return n(e,function(e){return q.test(e)?"xn--"+l(e):e})},f:function(e){return n(e,function(e){return D.test(e)?f(e.slice(4).toLowerCase()):e})}}}();URI.SCHEMES.http=URI.SCHEMES.https={domainHost:!0,parse:function(g){g.host||(g.error=g.error||"HTTP URIs must have a host.");return g},serialize:function(g){if(g.port===("https"!==String(g.scheme).toLowerCase()?80:443)||""===g.port)g.port=void 0;g.path||(g.path="/");return g}};
